<!--plugins/powerFlow/core/template/scenario/cmd.action.message.change_color.html-->
<div class="input-group input-group-sm" style="width: 100%">
  <span class="input-group-addon roundedLeft" style="width: 100px">#title_placeholder#</span>
  <select class="title form-control input-sm expressionAttr roundedRight" data-l1key="options" data-l2key="title" data-cmd_id="#id#" data-uid="#uid#">
    <option value="">#none#</option>
    <option value="inverter">#inverter#</option>
    <option value="inverter::text::in">#inverter# #inverterTextInColor#</option>
    <option value="grid">#grid#</option>
    <option value="grid::buy">#grid# #buy#</option>
    <option value="grid::sell">#grid# #sell#</option>
    <option value="solar">#solar#</option>
    <option value="solar::0">#solar# = 0</option>
    <option value="battery">#battery#</option>
    <option value="battery::charge">#battery_charge#</option>
    <option value="battery::discharge">#battery_discharge#</option>
    <option value="battery::mppt">#battery_mppt#</option>
    <option value="load">#load#</option>
    <option value="aux">#aux#</option>
  </select>
</div>

<div class="input-group input-group-sm" style="width: 100%; padding-top: 1px">
  <span class="input-group-addon roundedLeft" style="width: 100px">#message_placeholder#</span>
  <input type="color" class="form-control input-sm cursor colorChooser" data-uid="#uid#" value="#color#" style="width: 20%; display: inline-block;"/>
  <input class="expressionAttr form-control input-sm" data-l1key="options" data-l2key="color" value="#color#" data-uid="#uid#" style="width: 80%; display: inline-block;" placeholder="{{Couleur}} (hexa)"/>
  <span class="input-group-btn">
    <button class="btn btn-default listCmdInfo roundedRight" type="button" tooltip="{{SÃ©lectionner la commande}}" data-uid="#uid#" data-cmd_id="#id#">
      <i class="fas fa-list-alt"></i></button>
  </span>
</div>
<script>
  document.querySelector('.expressionAttr[data-uid="#uid#"][data-l1key="options"][data-l2key="title"]').value = '#title#'
  document.querySelector('.listCmdInfo[data-uid="#uid#"]').addEventListener('click', function () {
    jeedom.cmd.getSelectModal({cmd: {type: 'info'}}, function (result) {
      document.querySelector('.expressionAttr[data-uid="#uid#"][data-l1key="options"][data-l2key="color"]').value = result.human
    })
  })
  document.querySelector('.colorChooser[data-uid="#uid#"]').addEventListener('change', function () {
    document.querySelector('.expressionAttr[data-uid="#uid#"][data-l1key="options"][data-l2key="color"]').value = this.value
  })
</script>